<!DOCTYPE HTML>
<html style="height: 100%;">
<header>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <title>Sweet vs salty vs spicy!</title>
    <style>
        .center {
            display: -webkit-flex;
            display: flex;
            height: 100%;
            align-items: center;
            justify-content: center;
        }

        .category {
            margin-bottom: 15px;
        }

        .progress {
            margin-top: 5px;
        }
    </style>
</header>

<body style="height: 100%;">
    <div class="center">
        <div class="shadow p-3 mb-5 bg-white rounded">
            <h3 class="text-justify text-success">　　　　　　　Sweet vs salty vs spicy!　　　　　　　</h3>
            <br />
            <div class="category">
                <div class="statistics-sweet">
                    Sweet:
                </div>
                <div class="progress">
                    <div class="progress-bar sweet" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="category">
                <div class="statistics-salty">
                    Salty:
                </div>
                <div class="progress">
                    <div class="progress-bar salty" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="category">
                <div class="statistics-spicy">
                    Spicy:
                </div>
                <div class="progress">
                    <div class="progress-bar spicy" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            $.ajax("http://localhost:8080/result")
                .done(function (data) {
                    data = JSON.parse(data);
                    var total = data.sweet + data.salty + data.spicy;
                    var sweet = 0, salty = 0, spicy = 0;
                    if (total !== 0) {
                        sweet = Math.floor(data.sweet / total * 100);
                        salty = Math.floor(data.salty / total * 100);
                        spicy = Math.floor(data.spicy / total * 100);
                    }

                    $(".sweet").attr("aria-valuenow", sweet).css('width', sweet + '%').text(sweet + '%');
                    $(".salty").attr("aria-valuenow", salty).css('width', salty + '%').text(salty + '%');
                    $(".spicy").attr("aria-valuenow", spicy).css('width', spicy + '%').text(spicy + '%');

                    $(".statistics-sweet").text("Sweet: " + data.sweet);
                    $(".statistics-salty").text("Salty: " + data.salty);
                    $(".statistics-spicy").text("Spicy: " + data.spicy);
                })
        })
    </script>
</body>

</html>